---
// src/pages/destinos/[id].astro
import { countriesData } from '../../data/contries';
import Layout from '../../layouts/Layout.astro';
import Paises from '../../components/Paises';
import type {CountriesDataP, CountryData} from '../../data/contries' 
export const prerender = false

// // 1. getStaticPaths: Le dice a Astro qué páginas construir
// export function getStaticPaths() {
//   // Convertimos el objeto en un array de rutas
//   // Resultado: [{params: {id: 'mexico'}}, {params: {id: 'colombia'}}]
//   return Object.keys(countriesData).map((key) => ({
//     params: { id: key },
//   }));
// }

type CountryKey = keyof typeof countriesData;

export function getCountryById(id: CountryKey): CountryData {
  return countriesData[id];
}

// 2. Obtener los datos para la página actual
const { id } = Astro.params;
const country = id ? getCountryById(id as CountryKey) : undefined;

// Si por alguna razón no hay datos (seguridad extra), redirigir o mostrar 404
if (!country) {
  return Astro.redirect('/404');
}
---

<Layout>
    <Paises country={country}/>
</Layout>